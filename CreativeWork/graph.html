<!DOCTYPE html>
<html lang="en">
<head>
    <title>Corona Virus Graph</title>
    <meta name= "description" content="This is a list of refernces for images used throughout the blog"/>
    <meta name="keywords" content="Data Visualisation, blog, interactive media, Digitial Arts, Student 1771810, interactive media 3, WSOA4174"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" media="print">
    <script type="module" src="../JavaScript/navbar.js"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <link rel="stylesheet" type="text/css" href="../CSS/navbar.css">
    <link rel="stylesheet" type="text/css" href="../CSS/DeltaGraph.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  <header>
    <nav class="navbar" id="myNav" style="background-color: white;">
      <a href="../References/index.html" >References</a>
      <a href="../CreativeWork/index.html">Creative Work</a>
      <a href="../About/index.html">About</a>
      <article class="dropdown">
        <button class="dropbtn">Blogs 
          <i class="fa fa-caret-down"></i>
        </button>
        <section class="ddc">
          <a href="https://thelalakei.github.io/WSOA4174A_1771810/Blogs/TheoriesOfRepresentation.html">Reflection: Chapter 1(Theories Of Representation)</a>
          <a href="https://thelalakei.github.io/WSOA4174A_1771810/Blogs/HistoricDataVisualisation.html">Analysis: Historic Data Visualisation</a>
          <a href="https://thelalakei.github.io/WSOA4174A_1771810/Blogs/CommunicatingData.html">Reflection: Chapter 9(Communicating Data To An Audience)</a>
          <a href="https://thelalakei.github.io/WSOA4174A_1771810/Blogs/InformationIsBeautiful.html"> Bonus Analysis: Information Is Beautiful</a>
          <a href="https://thelalakei.github.io/WSOA4174A_1771810/Blogs/StyleGuide.html"> Website Style Guide</a>
          <a href="https://thelalakei.github.io/WSOA4174A_1771810/Blogs/WireFrames.html">WireFrames</a>
        </section>
      </article>  
      <a href="../index.html">Home</a>
      <a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="myFunction()">&#9776;</a>
    </nav>
  </header>

  <main>
    <h1 class="glow">Attemp at graph</h1>

    <!-- Graph  -->
    <section id="my_heatmap" style="padding-left: 25%;"></section>

    <!-- D3 Script -->
    <script>
 // set the dimensions and margins of the graph
const margin = {top: 80, right: 25, bottom: 30, left: 40},
  width = 1900 - margin.left - margin.right,
  height = 700 - margin.top - margin.bottom;

// append the svg object to the body of the page
const svg = d3.select("#my_heatmap")
.append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom)
.append("g")
  .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

//Read the data
d3.json("/data/users.json", function(error, data) {

  // Labels of row and columns -> unique identifier of the column called 'group' and 'variable'
  const myGroups = ["China", "Germany", "Italy", "South Africa", "United Arab Emirates", "UK", "US"]
  const myVars = ["TotalConfirmed", "NewConfirmed", "TotalDeaths", "NewDeaths", "TotalRecovered", "NewRecovered"]

  // Build X scales and axis:
  const x = d3.scaleBand()
    .range([ 0, width ])
    .domain(myGroups)
    .padding(0.01);
  svg.append("g")
    .style("font-size", 15)
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x).tickSize(0))
    .select(".domain").remove()

  // Build Y scales and axis:
  const y = d3.scaleBand()
    .range([ height, 0 ])
    .domain(myVars)
    .padding(0.05);
  svg.append("g")
    .style("font-size", 15)
    .call(d3.axisLeft(y).tickSize(0))
    .select(".domain").remove()

  // Build color scale
  const myColor = d3.scaleSequential()
    .interpolator(d3.interpolateInferno)
    .domain([1,100])

  // create a tooltip
  const tooltip = d3.select("#my_heatmap")
    .append("div")
    .style("opacity", 0)
    .attr("class", "tooltip")
    .style("background-color", "white")
    .style("border", "solid")
    .style("border-width", "2px")
    .style("border-radius", "5px")
    .style("padding", "5px")

  // Three function that change the tooltip when user hover / move / leave a cell
  const mouseover = function(d) {
    tooltip
      .style("opacity", 1)
    d3.select(this)
      .style("stroke", "black")
      .style("opacity", 1)
  }
  const mousemove = function(d) {
    tooltip
      .html("The exact value of<br>this cell is: " + d.value)
      .style("left", (d3.mouse(this)[0]+70) + "px")
      .style("top", (d3.mouse(this)[1]) + "px")
  }
  const mouseleave = function(d) {
    tooltip
      .style("opacity", 0)
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.8)
  }

  // add the squares
  svg.selectAll()
    .data(data, function(d) {return d.group+':'+d.variable;})
    .enter()
    .append("rect")
      .attr("x", function(d) { return x(d.group) })
      .attr("y", function(d) { return y(d.variable) })
      .attr("rx", 4)
      .attr("ry", 4)
      .attr("width", x.bandwidth() )
      .attr("height", y.bandwidth() )
      .style("fill", function(d) { return myColor(d.value)} )
      .style("stroke-width", 4)
      .style("stroke", "none")
      .style("opacity", 0.8)
    .on("mouseover", mouseover)
    .on("mousemove", mousemove)
    .on("mouseleave", mouseleave)
})

// Add subtitle to graph
svg.append("text")
        .attr("x", 150)
        .attr("y", -20)
        .attr("text-anchor", "left")
        .style("font-size", "14px")
        .style("fill", "grey")
        .style("max-width", 400)
        .text("A short description of the take-away message of this chart.");
       
     </script>

    <!-- Graph Reflection Section -->
    <section style="max-width:900px; margin:auto; padding-bottom: 3%;">
        <h2>Reflection On Graph</h2>

        <p>My chosen graph is the circular packing graph. The circular packing diagram 
          demonstrates the visualisation of a hierarchic organisation. In my diagram, I aimed to demonstrate the hierarchy of coronavirus 
          cases confirmed, and the subcategories of those confirmed how many recovered and how many resulted in deaths. 
          I utilized the area of the circle to represent the number and portion of categories. The subcategories were calculated in 
          proportion to the total confirmed cases.</p>

        <p>My data visualisation I aimed to elicit hope in my audience. I found that there is so much circulation of bad news and issues, 
          that have caused anxiety. I do not wish to overlook the lives of those we have lost, but aim to encourage people to recognize 
          that being infected by the virus is not an immediate death sentence and that there is hope in all the bad, there is an opportunity 
          for survival.</p>

        <p>The disadvantage of the circular packing diagram is that it is difficult for the human eye to translate area size into exact 
          numbers accurately. As a result, I have included keys that reflect the exact numbers. The keys are meant to represent a form of 
          Annotation, so as to assist the audience in better interpreting the graph.</p>

        <p>I hoped to increase interactivity in the diagram, however, was limited because of the time frame and my level of technical 
          competency, at the time of submission. In the future, I aim to create a more intricate diagram, that better reflects data and 
          communicates the information adequately to the user.</p>
        </section>

  </main>
</body>
</html>